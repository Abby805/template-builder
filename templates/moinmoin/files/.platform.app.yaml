# This file describes an application. You can have multiple applications
# in the same project.
#
# See https://docs.platform.sh/user_guide/reference/platform-app-yaml.html

# The name of this app. Must be unique within a project.
name: app

# The runtime the application uses.
type: "python:2.7"

## The build-time dependencies of the app.
dependencies:
    python:
        pipenv: "2018.10.13"

# The hooks executed at various points in the lifecycle of the application.
hooks:
    build: |
        ./moin/scripts/build.sh
    deploy: |
        ./moin/scripts/deploy.sh

# The size of the persistent disk of the application (in MB).
disk: 1024

# Set a local R/W mount for logs
mounts:
    'mywiki/data':
        source: local
        source_path: data
    'mywiki/underlay':
        source: local
        source_path: underlay

# The configuration of app when it is exposed to the web.
web:
    commands:
        start: python wikiserver.py
